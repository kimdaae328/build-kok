<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.kok.mapper.PaymentMapper">
    <insert id="insertPayment" useGeneratedKeys="true" keyProperty="id">
        insert into tbl_payment (
            payment_price,
            payment_status,
            advertisement_id,
            user_id,
            payment_paid_datetime
        )
        values (
                   #{paymentPrice},
                   #{paymentStatus},
                   #{advertisementId},
                   #{userId},
                   now()
               )
    </insert>

<!--    체험비 납부-->
    <insert id="insertPaymentByMember" useGeneratedKeys="true" keyProperty="id">
        insert into tbl_payment(payment_price, request_experience_id, user_id, payment_paid_datetime)
        values (
                #{paymentPrice}, #{requestExperienceId}, #{userId}, now()
               )
    </insert>

<!--    체험 지원 취소 시 status update-->
    <update id="updatePaymentByMember">
        update tbl_payment
        set payment_status='inactive'
        where request_experience_id=#{id}
    </update>
</mapper>

